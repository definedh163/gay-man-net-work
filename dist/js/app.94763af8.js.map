{"version":3,"file":"js/app.94763af8.js","mappings":"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","sources":["webpack://my-vue-app/./src/App.vue","webpack://my-vue-app/./src/components/form-modal.vue","webpack://my-vue-app/./src/components/form-modal.vue?e49d","webpack://my-vue-app/./src/components/table-view.vue","webpack://my-vue-app/./src/components/table-view.vue?4108","webpack://my-vue-app/./src/App.vue?946e","webpack://my-vue-app/./src/main.js","webpack://my-vue-app/webpack/bootstrap","webpack://my-vue-app/webpack/runtime/chunk loaded","webpack://my-vue-app/webpack/runtime/compat get default export","webpack://my-vue-app/webpack/runtime/define property getters","webpack://my-vue-app/webpack/runtime/global","webpack://my-vue-app/webpack/runtime/hasOwnProperty shorthand","webpack://my-vue-app/webpack/runtime/make namespace object","webpack://my-vue-app/webpack/runtime/jsonp chunk loading","webpack://my-vue-app/webpack/startup"],"sourcesContent":["<template>\n  <TableView />\n</template>\n\n<script>\nimport TableView from \"./components/table-view.vue\";\n\nexport default {\n  name: \"App\",\n  components: {\n    TableView,\n  },\n};\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n  padding: 0 10%;\n}\n</style>\n","<template>\r\n  <a-modal\r\n    v-model:open=\"open\"\r\n    :title=\"title\"\r\n    @cancel=\"handleCancel\"\r\n    :footer=\"null\"\r\n    :maskClosable=\"false\"\r\n  >\r\n    <a-form\r\n      ref=\"formRef\"\r\n      :label-col=\"{ span: 6 }\"\r\n      :wrapper-col=\"{ span: 16 }\"\r\n      autocomplete=\"off\"\r\n      :model=\"formState\"\r\n      :rules=\"rules\"\r\n      @finish=\"onFinish\"\r\n      @finishFailed=\"onFinishFailed\"\r\n      style=\"margin: 10%\"\r\n    >\r\n      <a-form-item label=\"文件别名\" name=\"name\">\r\n        <a-input v-model:value=\"formState.name\" />\r\n      </a-form-item>\r\n\r\n      <a-form-item v-if=\"!formState.id\" label=\"文件上传\" name=\"files\">\r\n        <a-upload\r\n          v-model:file-list=\"fileList\"\r\n          name=\"file\"\r\n          :headers=\"headers\"\r\n          :customRequest=\"uploadRequest\"\r\n          :before-upload=\"beforeUploadFj\"\r\n          @change=\"changeFj\"\r\n          @remove=\"removeFj\"\r\n          :maxCount=\"1\"\r\n        >\r\n          <a-button> 上传 </a-button>\r\n        </a-upload>\r\n      </a-form-item>\r\n\r\n      <div>\r\n        <a-form-item :wrapper-col=\"{ offset: 10, span: 16 }\">\r\n          <a-button type=\"primary\" html-type=\"submit\">提交</a-button>\r\n          <a-button style=\"margin: 0 10px\" @click=\"handleCancel\" type=\"default\"\r\n            >退出</a-button\r\n          >\r\n          <a-button @click=\"resetForm\" type=\"dashed\">重置</a-button>\r\n        </a-form-item>\r\n      </div>\r\n    </a-form>\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, defineExpose, defineEmits, unref } from \"vue\";\r\n// import dayjs from \"dayjs\";\r\nimport axios from \"axios\";\r\nimport { message } from \"ant-design-vue\";\r\nimport { Upload } from \"ant-design-vue\";\r\n\r\nconst emit = defineEmits([\"close\"]);\r\nconst open = ref(false);\r\n\r\nfunction validateFiles(rule, value, callback) {\r\n  console.log(\"🚀 ~ validateFiles ~ rule:\", rule);\r\n  console.log(\"🚀 ~ validateFiles ~ value:\", value);\r\n  if (fileList.value.length <= 0) {\r\n    callback(new Error(\"请上传文件!\"));\r\n  } else {\r\n    callback();\r\n  }\r\n}\r\nconst rules = {\r\n  name: [{ required: true, message: \"文件名称!\" }],\r\n  files: [{ required: true, validator: validateFiles, trigger: \"change\" }],\r\n};\r\nconst formRef = ref();\r\nconst title = ref(undefined);\r\n\r\n// const formData = reactive({ name: \"\" });\r\n\r\n// 后端地址\r\nconst apiUrl = \"https://definedh163.github.io:3000\"; // 替换为你的后端 API 地址\r\n\r\n// const actionUrl = `${apiUrl}/uploads`;\r\nconst formState = reactive({\r\n  name: \"\",\r\n  id: undefined,\r\n  files: undefined,\r\n});\r\n\r\nconst fileState = reactive({\r\n  id: undefined,\r\n  fileName: undefined,\r\n  downloadUrl: undefined,\r\n});\r\n\r\nconst fileList = ref([]);\r\n// const uploadUrl = \"http://localhost:3000/upload-file\"; // 后端文件上传接口\r\nconst headers = {\r\n  \"Content-Type\": \"multipart/form-data\",\r\n};\r\n\r\nconst onShow = (id = undefined) => {\r\n  open.value = true;\r\n  title.value = `${id ? \"编辑\" : \"新增\"}文件`;\r\n  if (id) {\r\n    formState.id = id;\r\n    getInfo(id);\r\n  }\r\n};\r\n\r\nfunction resetToUndefined(obj) {\r\n  Object.keys(obj).forEach((key) => {\r\n    obj[key] = undefined;\r\n  });\r\n}\r\n\r\nconst handleCancel = () => {\r\n  resetForm();\r\n  open.value = false;\r\n};\r\n\r\nconst getInfo = (id) => {\r\n  // 根据id 获取表单数据\r\n  const url = `${apiUrl}/getTableInfoById/${id}`;\r\n  axios.get(url).then((res) => {\r\n    let { code, row } = res.data;\r\n    if (code == 200) {\r\n      formState.name = row.name;\r\n      formState.files = JSON.parse(row.files);\r\n    }\r\n  });\r\n};\r\n\r\nconst onFinish = (values) => {\r\n  console.log(\"Success:\", values);\r\n  //updateTableData\r\n  const url = `${apiUrl}/${formState.id ? \"updateTableData\" : \"postFormData\"}`; // get 查看数据库数据\r\n\r\n  formState.files = Object.assign({}, fileState);\r\n  if (formState.id) {\r\n    axios.put(url, unref(formState)).then((res) => {\r\n      let { code, msg } = res.data;\r\n      if (code == 200) {\r\n        message.success(msg);\r\n        emit(\"close\");\r\n        resetForm();\r\n        handleCancel();\r\n      }\r\n    });\r\n  } else {\r\n    axios.post(url, formState).then((res) => {\r\n      let { code, msg } = res.data;\r\n      if (code == 200) {\r\n        message.success(msg);\r\n        emit(\"close\");\r\n        resetForm();\r\n        handleCancel();\r\n      }\r\n    });\r\n  }\r\n};\r\nconst onFinishFailed = (errorInfo) => {\r\n  console.log(\"Failed:\", errorInfo);\r\n};\r\n\r\nconst resetForm = () => {\r\n  formRef.value.resetFields();\r\n  resetToUndefined(fileState);\r\n\r\n  fileList.value.pop();\r\n};\r\n\r\nfunction formatFileSize(sizeInBytes) {\r\n  const sizeInGB = sizeInBytes / (1024 * 1024 * 1024);\r\n  return `${sizeInGB.toFixed(2)}gb`;\r\n}\r\n\r\nconst uploadRequest = (event) => {\r\n  const formData = new FormData();\r\n  formData.append(\"file\", event.file);\r\n  formData.append(\"name\", event.file.name); // 添加编码后的文件名到 FormData\r\n\r\n  const url = `${apiUrl}/uploads`;\r\n  axios\r\n    .post(url, formData, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data; charset=utf-8\", // 设置请求头为 multipart/form-data，并指定字符集为 UTF-8\r\n      },\r\n    })\r\n    .then((res) => {\r\n      let { code } = res.data;\r\n      if (code == 200) {\r\n        event.onSuccess(res, event.file); //上传成功监听事件\r\n        fileState.id = res.data.data.id;\r\n        fileState.fileName = res.data.data.name;\r\n        fileState.downloadUrl = res.data.data.downloadUrl;\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      event.onError(err, err, event.file);\r\n    });\r\n};\r\n\r\nconst changeFj = (info) => {\r\n  if (info.file.status !== \"uploading\") {\r\n    message.success(`${info.file.name} 上传中!`);\r\n  }\r\n  if (info.file.status === \"done\") {\r\n    fileList.value = info.fileList;\r\n    message.success(`${info.file.name} 上传成功!`);\r\n  } else if (info.file.status === \"error\") {\r\n    message.success(`${info.file.name} 上传失败!`);\r\n    fileList.value.pop();\r\n  }\r\n};\r\n\r\nconst removeFj = (file) => {\r\n  console.log(\"🚀 ~ removeFj ~ file:\", file);\r\n  fileList.value.pop();\r\n  resetToUndefined(fileState);\r\n};\r\n\r\nconst beforeUploadFj = (file) => {\r\n  console.log(\"🚀 ~ beforeUploadFj ~ file:\", file);\r\n  const isAcceptType = [\r\n    \"application/msword\",\r\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\r\n    \"application/vnd.ms-excel\",\r\n    \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\r\n    \"application/vnd.ms-powerpoint\",\r\n    \"application/pdf\",\r\n    \"application/vnd.openxmlformats-officedocument.presentationml.presentation\",\r\n    \"application/x-zip-compressed\",\r\n    \"image/tiff\",\r\n    \"application/vnd.android.package-archive\",\r\n  ];\r\n  if (!isAcceptType.includes(file.type)) {\r\n    message.error(\"仅支持doc、xls、ppt、pdf、docx、xlsx、pptx、zip、tiff、apk\");\r\n    return false || Upload.LIST_IGNORE;\r\n  }\r\n  const isLt10M = file.size / 1024 / 1024 < 500;\r\n  fileState.fileSize = formatFileSize(file.size);\r\n  if (!isLt10M) {\r\n    message.error(\"上传文件大小不能超过 500MB!\");\r\n  }\r\n  return isLt10M || Upload.LIST_IGNORE;\r\n};\r\n\r\ndefineExpose({ onShow });\r\n</script>\r\n","import script from \"./form-modal.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./form-modal.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <div>\n    <div\n      style=\"\n        margin-bottom: 10px;\n        margin-right: 10px;\n        display: flex;\n        justify-content: flex-end;\n      \"\n    >\n      <a-button @click=\"sendDataToBackend\" type=\"dashed\">上传</a-button>\n    </div>\n\n    <!-- <input type=\"file\" @change=\"handleFileUpload\" /> -->\n\n    <a-table\n      :dataSource=\"dataSource\"\n      :columns=\"columns\"\n      :loading=\"loading\"\n      row-key=\"id\"\n      :pagination=\"pagination\"\n      @change=\"handleTableChange\"\n    >\n      <template #bodyCell=\"{ column, record }\">\n        <template v-if=\"column.dataIndex === 'operation'\">\n          <div style=\"display: flex; justify-content: space-between\">\n            <a-button\n              style=\"color: green\"\n              type=\"link\"\n              @click=\"onEdit(record.id)\"\n            >\n              <template #icon> </template>编辑</a-button\n            >\n            <a-button\n              v-if=\"record.files.downloadUrl\"\n              style=\"color: #0958d9\"\n              type=\"link\"\n              :href=\"record.files.downloadUrl\"\n            >\n              <template #icon> </template>下载</a-button\n            >\n\n            <a-button\n              style=\"color: red\"\n              type=\"link\"\n              @click=\"onDelete(record.id)\"\n            >\n              <template #icon> </template>删除</a-button\n            >\n          </div>\n        </template>\n        <template v-if=\"column.dataIndex === 'fileName'\">\n          <span>{{ record.files.fileName }}</span>\n        </template>\n        <template v-if=\"column.dataIndex === 'fileSize'\">\n          <span>{{ record.files.fileSize }}</span>\n        </template>\n      </template>\n    </a-table>\n\n    <formModal ref=\"formModalRef\" @close=\"onClose\"></formModal>\n  </div>\n</template>\n\n<script setup>\nimport axios from \"axios\";\nimport formModal from \"./form-modal.vue\";\nimport { onMounted, reactive, ref, unref, computed } from \"vue\";\nimport { message } from \"ant-design-vue\";\n\n// 后端地址\nconst apiUrl = \"https://definedh163.github.io:3000\"; // 替换为你的后端 API 地址\n\nconst dataSource = ref([]);\nconst formModalRef = ref(undefined);\nconst searchForm = reactive({\n  current: 1,\n  pageSize: 10,\n});\nconst total = ref(0);\nconst loading = ref(false);\n\nconst columns = [\n  {\n    title: \"序号\",\n    dataIndex: \"index\",\n    align: \"center\",\n    width: 100,\n    customRender: ({ renderIndex }) => {\n      return (searchForm.current - 1) * 10 + renderIndex + 1;\n    },\n  },\n  {\n    title: \"文件别名\",\n    dataIndex: \"name\",\n    key: \"text\",\n  },\n  {\n    title: \"文件名称\",\n    dataIndex: \"fileName\",\n  },\n  {\n    title: \"文件大小\",\n    dataIndex: \"fileSize\",\n  },\n  {\n    title: \"操作\",\n    dataIndex: \"operation\",\n    align: \"center\",\n    width: 100,\n    fixed: \"right\",\n  },\n];\n\nonMounted(() => {\n  getDataSource();\n});\n\nconst pagination = computed(() => ({\n  total: total.value,\n  current: searchForm.pageNo,\n  pageSize: searchForm.pageSize,\n  showSizeChanger: true, // 是否显示pagesize选择\n  showQuickJumper: true, // 是否显示跳转窗\n  showTotal: (total) => `共 ${total} 条`,\n}));\n\nconst sendDataToBackend = () => {\n  formModalRef.value.onShow();\n};\n\nconst getDataSource = () => {\n  const url = `${apiUrl}/get-table-data`;\n  loading.value = true;\n  axios\n    .get(url, {\n      params: unref(searchForm),\n    })\n    .then((res) => {\n      let { code, data } = res.data;\n      if (code === 200) {\n        dataSource.value = data\n          .map((el) => {\n            if (el.files) {\n              el.files = JSON.parse(el.files);\n            }\n            return el;\n          })\n          .filter((f) => f != undefined);\n        total.value = res.data.total;\n        loading.value = false;\n      }\n    })\n    .catch((error) => {\n      console.error(\"获取数据失败:\", error);\n    });\n};\n\nconst handleTableChange = (pag) => {\n  searchForm.current = pag.current;\n  searchForm.pageSize = pag.pageSize;\n  getDataSource();\n};\n\nconst onDelete = async (id) => {\n  const deleteUrl = `${apiUrl}/delete-table/${id}`;\n\n  axios\n    .delete(deleteUrl)\n    .then((res) => {\n      if (res.data.code == 200) {\n        message.success(res.data.msg);\n        getDataSource();\n      } else {\n        message.error(\"删除数据失败!\");\n      }\n    })\n    .catch(() => {\n      message.error(\"系统异常!\");\n    });\n};\n\nconst onEdit = (id) => {\n  console.log(\"🚀 ~ onEdit ~ id:\", id);\n  formModalRef.value.onShow(id);\n};\n\nconst onClose = () => {\n  getDataSource();\n};\n</script>\n","import script from \"./table-view.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./table-view.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=72f27f3e\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=72f27f3e&lang=css\"\n\nimport exportComponent from \"../node_modules/.pnpm/vue-loader@17.4.2_vue@3.4.31_webpack@5.93.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport Antd from 'ant-design-vue';\nimport \"ant-design-vue/dist/reset.css\";\nconst app = createApp(App);\napp.use(Antd).mount(\"#app\");\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmy_vue_app\"] = self[\"webpackChunkmy_vue_app\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(4569); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_createBlock","_component_TableView","apiUrl","emit","__emit","open","ref","validateFiles","rule","value","callback","console","log","fileList","length","Error","rules","name","required","message","files","validator","trigger","formRef","title","undefined","formState","reactive","id","fileState","fileName","downloadUrl","headers","onShow","getInfo","resetToUndefined","obj","Object","keys","forEach","key","handleCancel","resetForm","url","axios","get","then","res","code","row","data","JSON","parse","onFinish","values","assign","put","unref","msg","success","post","onFinishFailed","errorInfo","resetFields","pop","formatFileSize","sizeInBytes","sizeInGB","toFixed","uploadRequest","event","formData","FormData","append","file","onSuccess","catch","err","onError","changeFj","info","status","removeFj","beforeUploadFj","isAcceptType","includes","type","error","Upload","LIST_IGNORE","isLt10M","size","fileSize","__expose","__exports__","dataSource","formModalRef","searchForm","current","pageSize","total","loading","columns","dataIndex","align","width","customRender","renderIndex","fixed","onMounted","getDataSource","pagination","computed","pageNo","showSizeChanger","showQuickJumper","showTotal","sendDataToBackend","params","map","el","filter","f","handleTableChange","pag","onDelete","async","deleteUrl","delete","onEdit","onClose","components","TableView","render","app","createApp","App","use","Antd","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","every","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","g","globalThis","this","Function","e","window","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","push","__webpack_exports__"],"sourceRoot":""}